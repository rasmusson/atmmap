"use strict";angular.module("minibankFrontendApp",["ngCookies","ngResource","ngSanitize","ngRoute","ui.map"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MapCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("minibankFrontendApp").controller("MapCtrl",["$scope","$http",function(a,b){function c(b){console.log(b),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(c){b.userPosition=new google.maps.LatLng(c.coords.latitude,c.coords.longitude),new google.maps.Marker({map:b.myMap,position:b.userPosition,icon:"images/gpsloc.png"}),b.myMap.setCenter(b.userPosition),b.myMap.setZoom(15),b.loadMarkers(a.myMap.center)},d):alert("Your browser does not support Geolocation.")}function d(){alert("Location can't be found")}a.loadMarkers=function(c){var d="http://steras-minibank-beta.appspot.com/minibank",e=d+"?lat="+c.lat()+"&long="+c.lng()+"&callback=JSON_CALLBACK",f=b.jsonp(e);f.success(function(b){console.log(b),a.markerData=b,$.each(b,function(b,c){console.log(c);var d=new google.maps.LatLng(c.latitude,c.longitude);new google.maps.Marker({position:d,map:a.myMap,icon:"images/atm.png"})})}),f.error(function(a){_gaq.push(["_trackEvent","Error loading markers"+a])})},c(a),a.mapOptions={center:new google.maps.LatLng(59.92199,10.760078),zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP}}]);